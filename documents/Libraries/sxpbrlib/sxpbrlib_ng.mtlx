<?xml version="1.0" encoding="UTF-8"?>
<materialx version="1.36">
  <!-- <normalmap> -->
  <nodegraph name="IMP_normalmap" nodedef="ND_normalmap" type="vector3">
    <multiply name="in_scale" type="vector3">
      <input name="in1" type="vector3" interfacename="in"/>
      <input name="in2" type="vector3" value="2.0000, 2.0000, 2.0000" />
    </multiply>
    <subtract name="in_subtract" type="vector3">
      <input name="in1" type="vector3" nodename="in_scale"/>
      <input name="in2" type="vector3" value="1.0000, 1.0000, 1.0000" />
    </subtract>
    <multiply name="tangent_comp" type="vector3">
      <input name="in1" type="vector3" interfacename="tangent"/>
      <input name="in2" type="float" nodename="in_subtract" channels="x" />
    </multiply>
    <multiply name="bitangent_comp" type="vector3">
      <input name="in1" type="vector3" interfacename="bitangent"/>
      <input name="in2" type="float" nodename="in_subtract" channels="y" />
    </multiply>
    <multiply name="normal_comp" type="vector3">
      <input name="in1" type="vector3" interfacename="normal"/>
      <input name="in2" type="float" nodename="in_subtract" channels="z" />
    </multiply>
    <add name="add1" type="vector3">
      <input name="in1" type="vector3" nodename="tangent_comp"/>
      <input name="in2" type="vector3" nodename="bitangent_comp"/>
    </add>
    <add name="add2" type="vector3">
      <input name="in1" type="vector3" nodename="normal_comp"/>
      <input name="in2" type="vector3" nodename="add1"/>
    </add>
    <normalize name="normalize1" type="vector3">
      <input name="in" type="vector3" nodename="add2"/>
    </normalize>
    <output name="out" type="vector3" nodename="normalize1"/>
  </nodegraph>

  <!-- <shadingnormal> -->
  <nodegraph name="IMP_shadingnormal__vector3" nodedef="ND_shadingnormal__vector3" type="vector3">
    <normal name="Nw" type="vector3">
      <parameter name="space" type="string" value="world"/>
    </normal>
    <backfacing name="bf" type="float"/>
    <invert name="ff" type="float">
      <input name="in" type="float" nodename="bf"/>
    </invert>
    <multiply name="mul_ff_2" type="float">
      <input name="in1" type="float" nodename="ff"/>
      <input name="in2" type="float" value="2.0" />
    </multiply>
    <subtract name="sub_ff_1" type="float">
      <input name="in1" type="float" nodename="mul_ff_2"/>
      <input name="in2" type="float" value="1.0" />
    </subtract>
    <multiply name="flip" type="vector3">
      <input name="in1" type="vector3" nodename="Nw"/>
      <input name="in2" type="vector3" nodename="sub_ff_1" />
    </multiply>
    <output name="out" type="vector3" nodename="flip"/>
  </nodegraph>

</materialx>
